{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\GraphQLServer\\\\cliente\\\\src\\\\componentes\\\\Clientes\\\\Clientes.js\";\nimport React, { Fragment, Component } from 'react';\nimport { Query, Mutation } from 'react-apollo';\nimport { CLIENTES_QUERY } from '../../queries';\nimport { ELIMINAR_CLIENTE } from '../../mutations';\nimport { Link } from 'react-router-dom';\nimport Exito from '../Alertas/Exito';\nimport Paginador from '../Paginador';\n\nclass Clientes extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      paginador: {\n        offset: 0,\n        actual: 1,\n        limite: 2\n      },\n      alerta: {\n        mostrar: false,\n        mensaje: ''\n      }\n    };\n\n    this.paginaAnterior = () => {\n      this.setState({\n        paginador: { ...this.state.paginador,\n          offset: this.state.paginador.offset - this.state.paginador.limite,\n          actual: this.state.paginador.actual - 1\n        }\n      });\n    };\n\n    this.paginaSiguiente = () => {\n      this.setState({\n        paginador: { ...this.state.paginador,\n          offset: this.state.paginador.offset + this.state.paginador.limite,\n          actual: this.state.paginador.actual + 1\n        }\n      });\n    };\n  }\n\n  render() {\n    const {\n      alerta: {\n        mostrar,\n        mensaje\n      }\n    } = this.state;\n    const alerta = mostrar ? React.createElement(Exito, {\n      mensaje: mensaje,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }) : '';\n    return React.createElement(Query, {\n      query: CLIENTES_QUERY,\n      pollInterval: 1000,\n      variables: {\n        limite: this.state.paginador.limite,\n        offset: this.state.paginador.offset\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, ({\n      loading,\n      error,\n      data,\n      startPolling,\n      stopPolling\n    }) => {\n      if (loading) return \"Cargando...\";\n      if (error) return `Error: ${error.message}`; //console.log(data);\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"Listado Clientes\"), alerta, React.createElement(\"div\", {\n        className: \" d-flex justify-content-end mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Paginaci\\xF3n\"), React.createElement(\"select\", {\n        defaultValue: this.state.paginador.limite,\n        onChange: e => {\n          this.setState({\n            paginador: {\n              offset: 0,\n              actual: 1,\n              limite: Number(e.target.value)\n            }\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"3\"), React.createElement(\"option\", {\n        value: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"4\"))), React.createElement(Paginador, {\n        actual: this.state.paginador.actual,\n        totalClientes: data.totalClientes,\n        limite: this.state.paginador.limite,\n        paginaAnterior: this.paginaAnterior,\n        paginaSiguiente: this.paginaSiguiente,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"ul\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, data.getClientes.map(item => {\n        const {\n          id\n        } = item;\n        return React.createElement(\"li\", {\n          key: item.id,\n          className: \"list-group-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row justify-content-betwen align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-md-8 d-flex justify-content-betwen align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, item.nombre, \" \", item.apellido), React.createElement(\"div\", {\n          className: \"col-md-4 d-flex justify-content-end\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Mutation, {\n          mutation: ELIMINAR_CLIENTE,\n          onCompleted: data => {\n            this.setState({\n              alerta: {\n                mostrar: true,\n                mensaje: data.eliminarCliente\n              }\n            }, () => {\n              setTimeout(() => {\n                this.setState({\n                  alerta: {\n                    mostrar: false,\n                    mensaje: ''\n                  }\n                });\n              }, 3000);\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, eliminarCliente => React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-danger d-block d-md-inline-block mr-2\",\n          onClick: () => {\n            if (window.confirm('Seguro que deseas eliminar el cliente?')) {\n              eliminarCliente({\n                variables: {\n                  id\n                }\n              });\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \"\\xD7 Eliminar\")), React.createElement(Link, {\n          to: `/clientes/editar/${item.id}`,\n          className: \"btn btn-success d-block d-md-inline-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \"Editar Clientes\"))));\n      })), React.createElement(Paginador, {\n        actual: this.state.paginador.actual,\n        total: data.totalClientes,\n        limite: this.state.paginador.limite,\n        paginaAnterior: this.paginaAnterior,\n        paginaSiguiente: this.paginaSiguiente,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }));\n    });\n  }\n\n}\n\nexport default Clientes;","map":{"version":3,"sources":["C:/Users/Usuario/Desktop/GraphQLServer/cliente/src/componentes/Clientes/Clientes.js"],"names":["React","Fragment","Component","Query","Mutation","CLIENTES_QUERY","ELIMINAR_CLIENTE","Link","Exito","Paginador","Clientes","state","paginador","offset","actual","limite","alerta","mostrar","mensaje","paginaAnterior","setState","paginaSiguiente","render","loading","error","data","startPolling","stopPolling","message","e","Number","target","value","totalClientes","getClientes","map","item","id","nombre","apellido","eliminarCliente","setTimeout","window","confirm","variables"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,cAAhC;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,SAAP,MAAsB,cAAtB;;AACA,MAAMC,QAAN,SAAuBR,SAAvB,CAAgC;AAAA;AAAA;AAAA,SAE5BS,KAF4B,GAEpB;AACAC,MAAAA,SAAS,EAAE;AACPC,QAAAA,MAAM,EAAE,CADD;AAEPC,QAAAA,MAAM,EAAE,CAFD;AAGPC,QAAAA,MAAM,EAAE;AAHD,OADX;AAMAC,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE,KADL;AAEJC,QAAAA,OAAO,EAAE;AAFL;AANR,KAFoB;;AAAA,SAcxBC,cAdwB,GAcP,MAAK;AAClB,WAAKC,QAAL,CAAc;AACVR,QAAAA,SAAS,EAAE,EACX,GAAG,KAAKD,KAAL,CAAWC,SADH;AAEXC,UAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,SAAX,CAAqBC,MAArB,GAA8B,KAAKF,KAAL,CAAWC,SAAX,CAAqBG,MAFhD;AAGXD,UAAAA,MAAM,EAAE,KAAKH,KAAL,CAAWC,SAAX,CAAqBE,MAArB,GAA8B;AAH3B;AADD,OAAd;AAOH,KAtBuB;;AAAA,SAwBxBO,eAxBwB,GAwBN,MAAM;AACpB,WAAKD,QAAL,CAAc;AACVR,QAAAA,SAAS,EAAE,EACX,GAAG,KAAKD,KAAL,CAAWC,SADH;AAEXC,UAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,SAAX,CAAqBC,MAArB,GAA8B,KAAKF,KAAL,CAAWC,SAAX,CAAqBG,MAFhD;AAGXD,UAAAA,MAAM,EAAE,KAAKH,KAAL,CAAWC,SAAX,CAAqBE,MAArB,GAA8B;AAH3B;AADD,OAAd;AAOH,KAhCuB;AAAA;;AAiCxBQ,EAAAA,MAAM,GAAE;AACJ,UAAM;AAACN,MAAAA,MAAM,EAAE;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV;AAAT,QAA+B,KAAKP,KAA1C;AACJ,UAAMK,MAAM,GAAIC,OAAD,GAAY,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAEC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAZ,GAAwC,EAAvD;AACI,WACI,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEb,cAAd;AAA8B,MAAA,YAAY,EAAE,IAA5C;AAAkD,MAAA,SAAS,EAAE;AAACU,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWC,SAAX,CAAqBG,MAA9B;AAAsCF,QAAAA,MAAM,EAAE,KAAKF,KAAL,CAAWC,SAAX,CAAqBC;AAAnE,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACV,CAAC;AAACU,MAAAA,OAAD;AAAUC,MAAAA,KAAV;AAAiBC,MAAAA,IAAjB;AAAuBC,MAAAA,YAAvB;AAAqCC,MAAAA;AAArC,KAAD,KAAsD;AACnD,UAAGJ,OAAH,EAAY,OAAO,aAAP;AACZ,UAAGC,KAAH,EAAU,OAAQ,UAASA,KAAK,CAACI,OAAQ,EAA/B,CAFyC,CAGpD;;AACC,aACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAEKZ,MAFL,EAGO;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEA;AACI,QAAA,YAAY,EAAI,KAAKL,KAAL,CAAWC,SAAX,CAAqBG,MADzC;AAEI,QAAA,QAAQ,EAAGc,CAAC,IAAG;AACX,eAAKT,QAAL,CAAc;AACVR,YAAAA,SAAS,EAAE;AACXC,cAAAA,MAAM,EAAE,CADG;AAEXC,cAAAA,MAAM,EAAE,CAFG;AAGXC,cAAAA,MAAM,EAAEe,MAAM,CAACD,CAAC,CAACE,MAAF,CAASC,KAAV;AAHH;AADD,WAAd;AAOH,SAVL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAaJ;AAAQ,QAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAbI,EAcJ;AAAQ,QAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAdI,EAeJ;AAAQ,QAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAfI,EAgBJ;AAAQ,QAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAhBI,CAFA,CAHP,EAwBI,oBAAC,SAAD;AACG,QAAA,MAAM,EAAI,KAAKrB,KAAL,CAAWC,SAAX,CAAqBE,MADlC;AAEG,QAAA,aAAa,EAAIW,IAAI,CAACQ,aAFzB;AAGG,QAAA,MAAM,EAAI,KAAKtB,KAAL,CAAWC,SAAX,CAAqBG,MAHlC;AAIG,QAAA,cAAc,EAAI,KAAKI,cAJ1B;AAKG,QAAA,eAAe,EAAI,KAAKE,eAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxBJ,EAkCI;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACII,IAAI,CAACS,WAAL,CAAiBC,GAAjB,CAAqBC,IAAI,IAAG;AACzB,cAAM;AAACC,UAAAA;AAAD,YAAOD,IAAb;AACA,eACA;AAAI,UAAA,GAAG,EAAEA,IAAI,CAACC,EAAd;AAAkB,UAAA,SAAS,EAAC,iBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAK,UAAA,SAAS,EAAC,2DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKD,IAAI,CAACE,MADV,OACmBF,IAAI,CAACG,QADxB,CADJ,EAII;AAAK,UAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,QAAD;AAAU,UAAA,QAAQ,EAAEjC,gBAApB;AACA,UAAA,WAAW,EAAGmB,IAAD,IAAQ;AACjB,iBAAKL,QAAL,CAAc;AACVJ,cAAAA,MAAM,EAAE;AACJC,gBAAAA,OAAO,EAAE,IADL;AAEJC,gBAAAA,OAAO,EAAEO,IAAI,CAACe;AAFV;AADE,aAAd,EAKG,MAAI;AACHC,cAAAA,UAAU,CAAC,MAAM;AACd,qBAAKrB,QAAL,CAAc;AACVJ,kBAAAA,MAAM,EAAC;AACHC,oBAAAA,OAAO,EAAE,KADN;AAEHC,oBAAAA,OAAO,EAAE;AAFN;AADG,iBAAd;AAMF,eAPS,EAOP,IAPO,CAAV;AAQH,aAdD;AAeH,WAjBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAmBKsB,eAAe,IACZ;AAAQ,UAAA,IAAI,EAAC,QAAb;AACA,UAAA,SAAS,EAAC,+CADV;AAEA,UAAA,OAAO,EAAE,MAAI;AACT,gBAAGE,MAAM,CAACC,OAAP,CAAe,wCAAf,CAAH,EAA4D;AACpEH,cAAAA,eAAe,CAAC;AACZI,gBAAAA,SAAS,EAAE;AAACP,kBAAAA;AAAD;AADC,eAAD,CAAf;AAGK;AACR,WARO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BApBR,CADJ,EAmCI,oBAAC,IAAD;AAAM,UAAA,EAAE,EAAG,oBAAmBD,IAAI,CAACC,EAAG,EAAtC;AAAyC,UAAA,SAAS,EAAC,2CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAnCJ,CAJJ,CADJ,CADA;AAiDC,OAnDJ,CADJ,CAlCJ,EAwFI,oBAAC,SAAD;AACG,QAAA,MAAM,EAAI,KAAK1B,KAAL,CAAWC,SAAX,CAAqBE,MADlC;AAEG,QAAA,KAAK,EAAIW,IAAI,CAACQ,aAFjB;AAGG,QAAA,MAAM,EAAI,KAAKtB,KAAL,CAAWC,SAAX,CAAqBG,MAHlC;AAIG,QAAA,cAAc,EAAI,KAAKI,cAJ1B;AAKG,QAAA,eAAe,EAAI,KAAKE,eAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxFJ,CADJ;AAmGH,KAxGU,CADJ;AA4GH;;AAhJuB;;AAkJhC,eAAeX,QAAf","sourcesContent":["import React, {Fragment, Component} from 'react';\r\nimport { Query, Mutation } from 'react-apollo';\r\nimport { CLIENTES_QUERY } from '../../queries';\r\nimport { ELIMINAR_CLIENTE } from '../../mutations';\r\nimport {Link} from 'react-router-dom';\r\nimport Exito from '../Alertas/Exito';\r\nimport Paginador from '../Paginador';\r\nclass Clientes extends Component{\r\n        //limite = 1;    \r\n    state = {\r\n            paginador: {\r\n                offset: 0,\r\n                actual: 1,\r\n                limite: 2\r\n            },\r\n            alerta: {\r\n                mostrar: false,\r\n                mensaje: ''\r\n            }\r\n            \r\n        }\r\n        paginaAnterior = () =>{\r\n            this.setState({\r\n                paginador: {\r\n                ...this.state.paginador,\r\n                offset: this.state.paginador.offset - this.state.paginador.limite,\r\n                actual: this.state.paginador.actual - 1,\r\n                }\r\n            })\r\n        }\r\n\r\n        paginaSiguiente = () => {\r\n            this.setState({\r\n                paginador: {\r\n                ...this.state.paginador,\r\n                offset: this.state.paginador.offset + this.state.paginador.limite,\r\n                actual: this.state.paginador.actual + 1\r\n                }\r\n            })\r\n        }\r\n        render(){\r\n            const {alerta: {mostrar, mensaje}} = this.state;\r\n        const alerta = (mostrar) ? <Exito mensaje={mensaje}/> :'';\r\n            return(\r\n                <Query query={CLIENTES_QUERY} pollInterval={1000} variables={{limite: this.state.paginador.limite, offset: this.state.paginador.offset}}>\r\n     {({loading, error, data, startPolling, stopPolling}) =>{\r\n         if(loading) return \"Cargando...\";\r\n         if(error) return `Error: ${error.message}`;\r\n        //console.log(data);\r\n         return(\r\n             <Fragment>\r\n                 <h2 className=\"text-center\">Listado Clientes</h2>\r\n                 {alerta}\r\n                    <div className=\" d-flex justify-content-end mb-2\">\r\n                        <h5 className=\"mr-2\">Paginación</h5>\r\n                    <select\r\n                        defaultValue = {this.state.paginador.limite}\r\n                        onChange={ e=> {\r\n                            this.setState({\r\n                                paginador: {\r\n                                offset: 0,    \r\n                                actual: 1,\r\n                                limite: Number(e.target.value)\r\n                                }                                       \r\n                            })                           \r\n                        }}\r\n                        \r\n                >\r\n                <option value=\"1\">1</option>\r\n                <option value=\"2\">2</option>\r\n                <option value=\"3\">3</option>\r\n                <option value=\"4\">4</option>\r\n            </select>\r\n            </div>\r\n                 <Paginador \r\n                    actual = {this.state.paginador.actual}\r\n                    totalClientes = {data.totalClientes}\r\n                    limite = {this.state.paginador.limite}\r\n                    paginaAnterior = {this.paginaAnterior}\r\n                    paginaSiguiente = {this.paginaSiguiente}\r\n                 />\r\n                    \r\n                \r\n             \r\n                 <ul className=\"list-group\">\r\n                    {data.getClientes.map(item =>{\r\n                        const {id} = item;\r\n                        return( \r\n                        <li key={item.id} className=\"list-group-item\">\r\n                            <div className=\"row justify-content-betwen align-items-center\">\r\n                                <div className=\"col-md-8 d-flex justify-content-betwen align-items-center\">\r\n                                    {item.nombre} {item.apellido}   \r\n                                </div>\r\n                                <div className=\"col-md-4 d-flex justify-content-end\">\r\n                                    <Mutation mutation={ELIMINAR_CLIENTE}\r\n                                    onCompleted={(data)=>{\r\n                                        this.setState({\r\n                                            alerta: {\r\n                                                mostrar: true,\r\n                                                mensaje: data.eliminarCliente\r\n                                            }\r\n                                        }, ()=>{\r\n                                            setTimeout(() => {\r\n                                               this.setState({\r\n                                                   alerta:{\r\n                                                       mostrar: false,\r\n                                                       mensaje: ''\r\n                                                   }\r\n                                               }) \r\n                                            }, 3000);\r\n                                        })\r\n                                    }}\r\n                                    >\r\n                                        {eliminarCliente =>(\r\n                                            <button type=\"button\" \r\n                                            className=\"btn btn-danger d-block d-md-inline-block mr-2\"\r\n                                            onClick={()=>{\r\n                                                if(window.confirm('Seguro que deseas eliminar el cliente?')){\r\n                                        eliminarCliente({\r\n                                            variables: {id}\r\n                                                 })\r\n                                            }\r\n                                    }}>\r\n                                        &times; Eliminar\r\n                                    </button>\r\n                                        )}\r\n                                        \r\n                                    </Mutation>\r\n                                    <Link to={`/clientes/editar/${item.id}`} className=\"btn btn-success d-block d-md-inline-block\">\r\n                                        Editar Clientes\r\n                                    </Link>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                        )    \r\n                        })}    \r\n                 </ul>\r\n                 <Paginador \r\n                    actual = {this.state.paginador.actual}\r\n                    total = {data.totalClientes}\r\n                    limite = {this.state.paginador.limite}\r\n                    paginaAnterior = {this.paginaAnterior}\r\n                    paginaSiguiente = {this.paginaSiguiente}\r\n                 />\r\n             </Fragment>\r\n             \r\n         )\r\n     }}       \r\n    </Query>    \r\n            )\r\n        }\r\n}\r\nexport default Clientes;"]},"metadata":{},"sourceType":"module"}