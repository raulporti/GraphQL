{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\Raul\\\\Desktop\\\\GraphQL\\\\cliente\\\\src\\\\componentes\\\\Auth\\\\Registro.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Mutation } from 'react-apollo';\nimport { NUEVO_USUARIO } from '../../mutations';\nimport Error from '../Alertas/Error';\nimport { withRouter, Redirect } from 'react-router-dom';\nconst initialState = {\n  usuario: '',\n  password: '',\n  repetirPassword: '',\n  nombre: '',\n  rol: ''\n};\n\nclass Registro extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...initialState\n    };\n\n    this.limpiarState = () => {\n      this.setState({ ...initialState\n      });\n    };\n\n    this.crearRegistro = (e, crearUsuario) => {\n      e.preventDefault();\n      crearUsuario().then(data => {\n        this.limpiarState(); //Redireccionamiento al login\n\n        this.props.history.push('/login');\n      });\n    };\n\n    this.actualizarState = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.validarForm = () => {\n      const {\n        usuario,\n        password,\n        repetirPassword,\n        nombre,\n        rol\n      } = this.state;\n      const noValido = !usuario || !nombre || !rol || !password || password !== repetirPassword;\n      return noValido;\n    };\n  }\n\n  render() {\n    const {\n      usuario,\n      password,\n      repetirPassword,\n      nombre,\n      rol\n    } = this.state;\n    const rolUsuario = this.props.session.obtenerUsuario.rol;\n    const redireccion = rolUsuario !== 'ADMINISTRADOR' ? React.createElement(Redirect, {\n      to: \"/cliente\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }) : '';\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, redireccion, React.createElement(\"h1\", {\n      className: \"text-center mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Nuevo Usuario\"), React.createElement(\"div\", {\n      className: \"row  justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(Mutation, {\n      mutation: NUEVO_USUARIO,\n      variables: {\n        usuario,\n        password,\n        nombre,\n        rol\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, (crearUsuario, {\n      loading,\n      error,\n      data\n    }) => {\n      return React.createElement(\"form\", {\n        className: \"col-md-8\",\n        onSubmit: e => this.crearRegistro(e, crearUsuario),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, error && React.createElement(Error, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        type: \"text\",\n        name: \"usuario\",\n        className: \"form-control\",\n        placeholder: \"Nombre Usuario\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"small\", {\n        className: \"form-text text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"(Sin espacios y sin caracteres especiales)\")), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Nombre\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        type: \"text\",\n        name: \"nombre\",\n        className: \"form-control\",\n        placeholder: \"Nombre Completo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        type: \"password\",\n        name: \"password\",\n        className: \"form-control\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Repetir Password\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        type: \"password\",\n        name: \"repetirPassword\",\n        className: \"form-control\",\n        placeholder: \"Repetir Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Rol:\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        value: rol,\n        name: \"rol\",\n        onChange: this.actualizarState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Elegir...\"), React.createElement(\"option\", {\n        value: \"ADMINISTRADOR\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"ADMINISTRADOR\"), React.createElement(\"option\", {\n        value: \"VENDEDOR\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"VENDEDOR\"))), React.createElement(\"button\", {\n        disabled: this.validarForm(),\n        type: \"submit\",\n        className: \"btn btn-success float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Crear Usuario\"));\n    })));\n  }\n\n}\n\nexport default withRouter(Registro);","map":{"version":3,"sources":["D:/Users/Raul/Desktop/GraphQL/cliente/src/componentes/Auth/Registro.js"],"names":["React","Component","Fragment","Mutation","NUEVO_USUARIO","Error","withRouter","Redirect","initialState","usuario","password","repetirPassword","nombre","rol","Registro","state","limpiarState","setState","crearRegistro","e","crearUsuario","preventDefault","then","data","props","history","push","actualizarState","name","value","target","validarForm","noValido","render","rolUsuario","session","obtenerUsuario","redireccion","loading","error"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\r\nimport {Mutation} from 'react-apollo';\r\nimport {NUEVO_USUARIO} from '../../mutations';\r\nimport Error from '../Alertas/Error';\r\nimport {withRouter, Redirect} from 'react-router-dom';\r\nconst initialState = {\r\n    usuario : '',\r\n    password : '',\r\n    repetirPassword : '',\r\n    nombre : '',\r\n    rol: ''\r\n}\r\nclass Registro extends Component {\r\n    state = { \r\n        ...initialState\r\n     }\r\n\r\n     limpiarState = () =>{\r\n         this.setState({\r\n             ...initialState\r\n         })\r\n     }\r\n     crearRegistro = (e, crearUsuario) =>{\r\n        e.preventDefault();\r\n        crearUsuario().then(data =>{\r\n            this.limpiarState();\r\n\r\n            //Redireccionamiento al login\r\n            this.props.history.push('/login');\r\n        })\r\n     }\r\n     actualizarState = e =>{\r\n        const {name, value} = e.target;\r\n        this.setState({\r\n            [name] : value\r\n\r\n        });\r\n     }\r\n\r\n     validarForm = () =>{\r\n         const {usuario, password, repetirPassword, nombre, rol} = this.state;\r\n         const noValido = !usuario || !nombre || !rol || !password || password !== repetirPassword;\r\n         return noValido;\r\n     }\r\n    render() { \r\n        const {usuario, password, repetirPassword, nombre, rol} = this.state;\r\n        const rolUsuario = this.props.session.obtenerUsuario.rol;\r\n        const redireccion = (rolUsuario!== 'ADMINISTRADOR') ? <Redirect to =\"/cliente\"/> : '';\r\n        return ( \r\n           <Fragment>\r\n               {redireccion}\r\n               <h1 className=\"text-center mb-5\">Nuevo Usuario</h1>\r\n                <div className=\"row  justify-content-center\">\r\n                    <Mutation mutation={NUEVO_USUARIO}\r\n                              variables={{usuario, password, nombre, rol}}  \r\n                    >\r\n                    {(crearUsuario, {loading, error, data})=>{\r\n                        return (\r\n                            <form \r\n                            className=\"col-md-8\"\r\n                            onSubmit={e => this.crearRegistro(e, crearUsuario)}\r\n                            >\r\n                                {error && <Error error={error}/>}\r\n                               <div className=\"form-group\">\r\n                               <label>Usuario</label>\r\n                               <input \r\n                               onChange = {this.actualizarState}\r\n                               type=\"text\" \r\n                               name=\"usuario\" \r\n                               className=\"form-control\" \r\n                               placeholder=\"Nombre Usuario\" \r\n                               />\r\n                               <small className=\"form-text text-muted\">\r\n                                    (Sin espacios y sin caracteres especiales)\r\n                               </small>\r\n                                </div>\r\n                                <div className=\"form-group\">\r\n                               <label>Nombre</label>\r\n                               <input \r\n                               onChange = {this.actualizarState}\r\n                               type=\"text\" \r\n                               name=\"nombre\" \r\n                               className=\"form-control\" \r\n                               placeholder=\"Nombre Completo\" \r\n                               />\r\n                                </div>\r\n                                <div className=\"form-row\">\r\n                                <div className=\"form-group col-md-6\">\r\n                                   <label>Password</label>\r\n                                   <input\r\n                                   onChange = {this.actualizarState} \r\n                                       type=\"password\" \r\n                                       name=\"password\" \r\n                                       className=\"form-control\" \r\n                                       placeholder=\"Password\"\r\n                                   />\r\n                               </div>\r\n                               <div className=\"form-group\">\r\n                                   <label>Repetir Password</label>\r\n                                   <input \r\n                                       onChange = {this.actualizarState}\r\n                                       type=\"password\" \r\n                                       name=\"repetirPassword\" \r\n                                       className=\"form-control\" \r\n                                       placeholder=\"Repetir Password\" \r\n                                   />\r\n                               </div>\r\n                                </div>\r\n                               <div className=\"form-group\">\r\n                                    <label>Rol:</label>\r\n                                    <select\r\n                                        className =\"form-control\"\r\n                                        value = {rol}\r\n                                        name = \"rol\"\r\n                                        onChange = {this.actualizarState}\r\n                                    >\r\n                                        <option value=\"\">Elegir...</option>\r\n                                        <option value=\"ADMINISTRADOR\">ADMINISTRADOR</option>\r\n                                        <option value=\"VENDEDOR\">VENDEDOR</option>\r\n                                    </select>\r\n                               </div>\r\n   \r\n                               <button \r\n                                   disabled = {this.validarForm()}\r\n                                   type=\"submit\" \r\n                                   className=\"btn btn-success float-right\">\r\n                                       Crear Usuario\r\n                               </button>\r\n                   </form>  \r\n                        )\r\n                    }}        \r\n                    \r\n                </Mutation>\r\n            </div>\r\n           </Fragment>\r\n         );\r\n    }\r\n}\r\nexport default withRouter(Registro);"]},"metadata":{},"sourceType":"module"}