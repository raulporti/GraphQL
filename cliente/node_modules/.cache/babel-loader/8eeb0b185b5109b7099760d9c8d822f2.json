{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\Raul\\\\Desktop\\\\GraphQL\\\\cliente\\\\src\\\\componentes\\\\Auth\\\\Login.js\";\nimport React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Error from '../Alertas/Error';\nimport { Mutation } from 'react-apollo';\nimport { AUTENTICAR_USUARIO } from '../../mutations';\nconst initialState = {\n  usuario: '',\n  password: ''\n};\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...initialState\n    };\n\n    this.actualizarState = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.limpiarState = () => {\n      this.setState({ ...initialState\n      });\n    };\n\n    this.iniciarSesion = (e, usuarioAutenticar) => {\n      e.preventDefault();\n      usuarioAutenticar().then(async ({\n        data\n      }) => {\n        localStorage.setItem('token', data.autenticarUsuario.token); //Ejecturar el query una vez que se haya iniciado\n        //await this.props.refetch();\n        //limpiar state\n\n        this.limpiarState(); //Redireccionar\n\n        setTimeout(() => {\n          this.props.history.push('/panel');\n        }, 3000);\n      });\n    };\n\n    this.validarForm = () => {\n      const {\n        usuario,\n        password\n      } = this.state;\n      const noValido = !usuario || !password;\n      return noValido;\n    };\n  }\n\n  render() {\n    const {\n      usuario,\n      password\n    } = this.state;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Iniciar Sesi\\xF3n\"), React.createElement(\"div\", {\n      className: \"row  justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(Mutation, {\n      mutation: AUTENTICAR_USUARIO,\n      variables: {\n        usuario,\n        password\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, (usuarioAutenticar, {\n      loading,\n      error,\n      data\n    }) => {\n      return React.createElement(\"form\", {\n        onSubmit: e => this.iniciarSesion(e, usuarioAutenticar),\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, error && React.createElement(Error, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        value: usuario,\n        type: \"text\",\n        name: \"usuario\",\n        className: \"form-control\",\n        placeholder: \"Nombre Usuario\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        onChange: this.actualizarState,\n        value: password,\n        type: \"password\",\n        name: \"password\",\n        className: \"form-control\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        disabled: loading || this.validarForm(),\n        type: \"submit\",\n        className: \"btn btn-success float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Iniciar Sesi\\xF3n\"));\n    })));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["D:/Users/Raul/Desktop/GraphQL/cliente/src/componentes/Auth/Login.js"],"names":["React","Component","Fragment","withRouter","Error","Mutation","AUTENTICAR_USUARIO","initialState","usuario","password","Login","state","actualizarState","e","name","value","target","setState","limpiarState","iniciarSesion","usuarioAutenticar","preventDefault","then","data","localStorage","setItem","autenticarUsuario","token","setTimeout","props","history","push","validarForm","noValido","render","loading","error"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Error from '../Alertas/Error';\r\nimport { Mutation } from 'react-apollo';\r\nimport {AUTENTICAR_USUARIO} from '../../mutations';\r\nconst initialState = {\r\n    usuario : '',\r\n    password: ''\r\n}\r\n\r\nclass Login extends Component {\r\n    state = {\r\n        ...initialState\r\n    }\r\n\r\n     actualizarState = e => {\r\n         const { name, value} = e.target;\r\n\r\n        this.setState({\r\n            [name] : value\r\n        })\r\n     }\r\n\r\n\r\n    limpiarState = () => {\r\n         this.setState({...initialState});\r\n    }\r\n\r\n    iniciarSesion = (e, usuarioAutenticar) => {\r\n        e.preventDefault();\r\n        usuarioAutenticar().then(async({data})=>{\r\n            localStorage.setItem('token', data.autenticarUsuario.token);\r\n            //Ejecturar el query una vez que se haya iniciado\r\n            //await this.props.refetch();\r\n            //limpiar state\r\n            this.limpiarState();\r\n            //Redireccionar\r\n            setTimeout(() => {\r\n                this.props.history.push('/panel');\r\n            }, 3000);\r\n        })\r\n     }\r\n\r\n     validarForm = () => {\r\n        const {usuario, password} = this.state;\r\n        const noValido = !usuario || !password;\r\n          return noValido;\r\n     }\r\n    render() { \r\n\r\n        const {usuario, password} = this.state;\r\n      \r\n        return ( \r\n            <Fragment>\r\n                 <h1 className=\"text-center mb-5\">Iniciar Sesión</h1>\r\n                <div className=\"row  justify-content-center\">\r\n\r\n                    <Mutation \r\n                        mutation={AUTENTICAR_USUARIO}\r\n                        variables={{usuario, password}}    \r\n                    >\r\n                    {( usuarioAutenticar, {loading, error, data}) => {\r\n\r\n                        return (\r\n                            \r\n                            <form \r\n                                onSubmit={ e => this.iniciarSesion(e, usuarioAutenticar) } \r\n                                className=\"col-md-8\"\r\n                            >\r\n\r\n                            {error && <Error error={error} />}\r\n                            \r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Usuario</label>\r\n                                <input \r\n                                    onChange={this.actualizarState} \r\n                                    value={usuario}\r\n                                    type=\"text\" \r\n                                    name=\"usuario\" \r\n                                    className=\"form-control\" \r\n                                    placeholder=\"Nombre Usuario\" \r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Password</label>\r\n                                <input \r\n                                    onChange={this.actualizarState} \r\n                                    value={password}\r\n                                    type=\"password\" \r\n                                    name=\"password\" \r\n                                    className=\"form-control\" \r\n                                    placeholder=\"Password\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button \r\n                                disabled={ \r\n                                    loading || this.validarForm()\r\n                                }\r\n                                type=\"submit\" \r\n                                className=\"btn btn-success float-right\">\r\n                                    Iniciar Sesión\r\n                            </button>\r\n                            \r\n                        </form>\r\n                        )     \r\n                    }}\r\n                    </Mutation>\r\n                </div>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}